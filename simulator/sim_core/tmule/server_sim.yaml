---
session: server
init_cmd: |
  #exec /bin/bash
  echo "Sourcing..."
  source ~/warez/src/warez/runcom.rc
  source $(rospack find $CONFIG)/config/network.net
  export MAP_FILE=$(rospack find $CONFIG)/config/maps/map.map
  export TMAP_FILE=$(rospack find $CONFIG)/config/tmaps/tmap.tmap2
  export RVIZ_FILE=$(rospack find $CONFIG)/config/tmaps/tmaps.rviz

  . /usr/share/gazebo/setup.sh
  export TURTLEBOT3_MODEL=burger
  export DISPLAY=:0.0

windows:

# 1. Spawn the robot into the (already opened) gazebo server
- name: gzserver
  panes:
  - roslaunch sim_core server.launch use_sim:=false
  check: "rosservice list | grep -q gazebo"


# 2. Open visualisation tools
- name: visuals
  panes:
  - rviz -d $RVIZ_FILE
#  - gzclient #& sleep 5; wmctrl -r Gazebo -b add,fullscreen


# 3. Launch the map server for the occupancy grid
- name: mapserver
  panes:
  - roslaunch sim_core mapserver.launch map_file:=$MAP


# 4. Launch the topological maps and restrictors
#- name: topomaps
#  panes:
#  - roslaunch sim_core topomaps.launch tmap_file:=$TMAP_FILE


## 5. Launch the networking systems
#- name: networking
#  panes:
#  - roslaunch sim_core networking.launch


